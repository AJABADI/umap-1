# Visualizing the Iris dataset with UMAP

```{r, echo=FALSE}
library(umap)

iris.colors = c("#1f77b4", "#d62728", "#7f7f7f")
iris.colors = c("#ff7f00", "#e377c2", "#17becf")
plot.iris = function(layout, labels, main="",
                      pad=0.02, cex=0.65, pch=19,
		      cex.main=1.5, cex.legend=1.3) {
  par(mar=c(0.2,0.7,1.2,0.7))
  xylim = range(layout)
  xylim = xylim + ((xylim[2]-xylim[1])*pad)*c(-0.5, 0.5)
  plot(xylim, xylim, type="n", axes=F, frame=T)
  points(layout[,1], layout[,2], col=iris.colors[as.integer(labels)],
         cex=cex, pch=pch)
  mtext(side=3, main, cex=cex.main)

  labels.u = unique(labels)
  legend("topright", legend=as.character(labels.u),
         col=iris.colors[as.integer(labels.u)],
	 bty="n", pch=pch, cex=cex.legend)
  
}

set.seed(1009876)
```


This vignette demonstrates how to apply `umap` on the Iris dataset.
This dataset comes packaged with R, so it is immediately accessible through object `iris`.

```{r}
head(iris, 3)
```

The first four columns contain data, the last column contains a label. From this, let's
compute distances based on the data columns and define a color vector based on the labels.

```{r}
iris.dist = dist(iris[,1:4])
iris.labels = iris[, "Species"]
```

```{r compute.cmdscale, cache=TRUE}
iris.cmdscale = cmdscale(iris.dist)
```


```{r compute.umap, cache=TRUE}
config = umap.defaults	
config$n.epochs = 500
config$n.neighbors = 15
iris.umap = umap(iris[,1:4], config)
```	  

```{r, fig.width=10, fig.height=5, dpi=300}
par(mfrow=c(1,2))
plot.iris(iris.cmdscale, iris.labels, main="cmdscale")
plot.iris(iris.umap, iris.labels, main="umap")
```



